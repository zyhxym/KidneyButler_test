<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
     <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>

    <link rel="manifest" href="manifest.json">
    <meta http-equiv="Content-Security-Policy" content="img-src * 'self' data:; default-src * 'self' gap: ; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://res.wx.qq.com http://121.43.107.106 http://*.haihonghospitalmanagement.com https://*.haihonghospitalmanagement.com; connect-src 'self' * http://* https://* ws://* wss://*; ">
    <!-- un-comment this code to enable service worker
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('service worker installed'))
          .catch(err => console.log('Error', err));
      }
    </script>-->
    <!-- 美化图标 -->
    <link rel="stylesheet" type="text/css" href="lib/icon_font/iconfont.css">
    <link href="css/kidneybutler.css" rel="stylesheet">

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <!-- 聊天页 -->
    <link href="css/msg.css" rel="stylesheet">
    <!-- 进度条 -->
    <link href="css/progressbar.css" rel="stylesheet">
    <!-- IF using Sass (run gulp sass first), then uncomment below and remove the CSS includes above
    <link href="css/ionic.app.css" rel="stylesheet">
    -->

    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>
     
    <!-- cordova script (this will be a 404 during development) -->
    <!-- <script src="cordova.js"></script> -->
    <script src="lib/ngCordova/dist/ng-cordova.min.js"></script>
    <!-- <script src="lib/ionic/js/angular/angular.min.js"></script> -->
    <script src="lib/ng-file-upload.js"></script>


    <!-- 第三方js -->
    <!-- <script src="lib/ionic-timepicker/dist/ionic-timepicker.bundle.min.js"></script> -->
    <script src="lib/angular-resource/angular-resource.min.js"></script>
    <script src="lib/ionic-datepicker-master/dist/ionic-datepicker.bundle.min.js"></script>
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script src="lib/socket.io.js"></script>
    <script src="lib/angular-jwt/dist/angular-jwt.min.js"></script>
    <!-- loading spin: 用于DOM element加载时显示一个转动的小圈 see: http://spin.js.org/ XJZ-->
    <script src="lib/spin.min.js"></script>
    <!-- 计算登录jpush的密码 XJZ-->
    <script src="lib/md5.min.js"></script>

    <!--js数据库-->
    <!-- <script src="lib/taffydb-master/taffy-min.js"></script> -->



    
    <!-- your app's js -->
    <script src="js/app.js"></script>
    <script src="js/services.js"></script>
    <script src="js/controllers.js?version=1.0"></script>
    <script src="js/directives.js"></script>
    <script src="js/filters.js"></script>
    
  </head>

  <body ng-app="kidney">

    <ion-nav-view animation="slide-left-right"></ion-nav-view>
    <img id="splashimg" style="width: 100%; height: 100%">
  </body>
</html>
<script type="text/javascript">
    var fromUrl;
    var width = document.body.scrollWidth;
    var height = document.body.scrollHeight;

    var w = [200, 240, 320, 480, 720, 960, 1280];
    var h = [320, 480, 800, 1280, 1600, 1920];

    var splash = getsplash(width, height);
    
    // console.log(fromUrl)
        document.getElementById('splashimg').src = "patient/" + splash;
        document.getElementById('splashimg').style.height = height + "px";
        document.getElementById('splashimg').style.width = width + "px";

    function GetQueryString(name)
    {
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if(r!=null)return  unescape(r[2]); return null;
    }
    if (fromUrl != "")
    {
        // window.location.href= fromUrl
    }


    function search(No, array)
    {
        var temp = 0;
        for (var i = 0; i < array.length; i ++)
        {
            if (Math.abs(array[i] - No) < Math.abs(array[temp] - No))
            {
                temp = i;
            }
        }
        return array[temp];
    }
    function getsplash(a, b)
    {
      if (a < b)
      {
        a = search(a, w);
        if (a === 200)
        {
          return "200x320.png";
        }
        else if (a === 240)
        {
          return "240x320.png";
        }
        else if (a === 320)
        {
          return "320x480.png";
        }
          else if (a === 480)
        {
          return "480x800.png";
        }
        else if (a === 720)
        {
          return "720x1280.png";
        }
        else if (a === 960)
        {
          return "960x1600.png";
        }
        else if (a === 1280)
        {
          return "1280x1920.png";
        }
      }
      else
      {
        a = search(a, h);
        if (a === 320)
        {
          b = search(b, [200, 240]);
          return a + "x" + b + ".png";
        }
        else if (a === 480)
        {
          return "480x320.png";
        }
        else if (a === 800)
        {
          return "800x480.png";
        }
        else if (a === 1280)
        {
          return "1280x720.png";
        }
        else if (a === 1600)
        {
          return "1600x960.png";
        }
        else if (a === 1920)
        {
          return "1920x1280.png";
        }
      }
    };
</script>